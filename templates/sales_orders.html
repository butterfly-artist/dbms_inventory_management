{% extends 'base.html' %}
{% block title %}Sales Orders - Inventory{% endblock %}
{% block content %}
<h1 class="mb-3">Sales Orders</h1>
<div class="row">
  <div class="col-md-5">
    <h3 class="h5">Record New Sale (Dispatch Stock)</h3>
    <form method="post">
      <div class="mb-3">
        <label class="form-label">Customer Name</label>
        <input type="text" name="customer_name" class="form-control">
      </div>
      <div class="mb-3">
        <label class="form-label">Product</label>
        <select name="product_id" class="form-select" required>
          {% for p in products %}
          <option value="{{ p._id }}">{{ p.name }} ({{ p.sku }})</option>
          {% endfor %}
        </select>
      </div>
      <div class="mb-3">
        <label class="form-label">Warehouse</label>
        <select name="warehouse_id" class="form-select" required>
          {% for w in warehouses %}
          <option value="{{ w._id }}">{{ w.name }} ({{ w.code }})</option>
          {% endfor %}
        </select>
      </div>
      <div class="mb-3">
        <label class="form-label">Quantity</label>
        <input type="number" name="quantity" class="form-control" min="1" required>
      </div>
      <button type="submit" class="btn btn-primary">Save &amp; Update Stock</button>
    </form>
  </div>
  <div class="col-md-7">
    <h3 class="h5">Recent Sales Orders</h3>
    <table class="table table-bordered table-striped">
      <thead>
        <tr>
          <th>Customer</th>
          <th>Product ID</th>
          <th>Warehouse ID</th>
          <th>Quantity</th>
          <th>Status</th>
        </tr>
      </thead>
      <tbody>
        {% for so in sales_orders %}
        <tr>
          <td>{{ so.customer_name }}</td>
          <td>{{ so.product_id }}</td>
          <td>{{ so.warehouse_id }}</td>
          <td>{{ so.quantity }}</td>
          <td>{{ so.status }}</td>
        </tr>
        {% endfor %}
      </tbody>
    </table>
  </div>
</div>
{% endblock %}
